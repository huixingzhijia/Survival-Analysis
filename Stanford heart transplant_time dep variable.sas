*DOB: date of birth   mm/dd/yy;
*DOA: date of acceptance into the program mm/dd/yy;
*DOT: date of transplant, mm/dd/yy,  missing=no transplant;
*DLS: date last seen (dead or censored) mm/dd/yy;
*Dead: coded =dead at DLS, 0=censored;
*SURG: 1=open-heart surgery prior to DOA, 0=no;
*M1: number of donor alleles with no match in recipient (1-4), missing=no transplant;
*M2: 1=donor-recipient mismatch on HLA-A2 antigen, 0=otherwise, missing=no transplant;
*M3: mismatch score, missing=no transplant;

OPTIONS YEARCUTOFF=1900;
data stan;
input dob mmddyy9. doa mmddyy9. dot mmddyy9. dls mmddyy9.
   id age dead dur surg trans wtime m1 m2 m3 reject;
surv1=dls-doa;  *survival time since date of acceptance;
surv2=dls-dot;  *survival time since date of transplantation;
wait=dot-doa;   *# days from acceptance to transplant;
if wait=. then wait=10000;
agetrans=(dot-dob)/365.25;  *age at transplant;
ageaccpt=(doa-dob)/365.25;  *age at acceptance into the program;
if dot= . then trans=0; else trans=1;
agels=(dls-dob)/365.25;  *age last seen;
Datalines;
01/10/37 11/15/67     .    01/03/68 1 30 1 50 0 0 . . . . .
03/02/16 01/02/68     .    01/07/68 2 51 1 6 0 0 . . . . .
09/19/13 01/06/68 01/06/68 01/21/68 3 54 1 16 0 1 1 2 0 1.110 0
12/23/27 03/28/68 05/02/68 05/05/68 4 40 1 39 0 1 36 3 0 1.660 0
07/28/47 05/10/68     .    05/27/68 5 20 1 18 0 0 . . . . .
11/08/13 06/13/68     .    06/15/68 6 54 1 3 0 0 . . . . .
08/29/17 07/12/68 08/31/68 05/17/70 7 50 1 675 0 1 51 4 0 1.320 1
03/27/23 08/01/68     .    09/09/68 8 45 1 40 0 0 . . . . .
06/11/21 08/09/68     .    11/01/68 9 47 1 85 0 0 . . . . .
02/09/26 08/11/68 08/22/68 10/07/68 10 42 1 58 0 1 12 2 0 0.610 1
08/22/20 08/15/68 09/09/68 01/14/69 11 47 1 153 0 1 26 1 0 0.360 0
07/09/15 09/17/68     .    09/24/68 12 53 1 8 0 0 . . . . .
02/22/14 09/19/68 10/05/68 12/08/68 13 54 1 81 0 1 17 3 0 1.890 1
09/16/14 09/20/68 10/26/68 07/07/72 14 53 1 1386 0 1 37 1 0 0.870 1
12/04/14 09/27/68     .    09/27/68 15 53 1 1 1 0 . . . . .
05/16/19 10/26/68 11/22/68 08/29/69 16 49 1 308 0 1 28 2 0 1.120 1
06/29/48 10/28/68     .    12/02/68 17 20 1 36 0 0 . . . . .
12/27/11 11/01/68 11/20/68 12/13/68 18 56 1 43 0 1 20 3 0 2.050 0
10/04/09 11/18/68     .    12/24/68 19 59 1 37 0 0 . . . . .
10/19/13 01/29/69 02/15/69 02/25/69 20 55 1 28 0 1 18 3 1 2.760 1
09/29/25 02/01/69 02/08/69 11/29/71 21 43 1 1032 0 1 8 2 0 1.130 1
06/05/26 03/18/69 03/29/69 05/07/69 22 42 1 51 0 1 12 3 0 1.380 1
12/02/10 04/11/69 04/13/69 04/13/71 23 58 1 733 0 1 3 3 0 0.960 1
07/07/17 04/25/69 07/16/69 11/29/69 24 51 1 219 0 1 83 3 1 1.620 1
02/06/36 04/28/69 05/22/69 04/01/74 25 33 0 1799 0 1 25 2 0 1.060 0
10/18/38 05/01/69     .    03/01/73 26 30 0 1400 0 0 . . . . .
07/21/60 05/04/69     .    01/21/70 27 8 1 263 0 0 . . . . .
05/30/15 06/07/69 08/16/69 08/17/69 28 53 1 72 0 1 71 2 0 0.470 0
02/06/19 07/14/69     .    08/17/69 29 50 1 35 0 0 . . . . .
09/20/24 08/19/69 09/03/69 12/18/71 30 44 1 852 0 1 16 4 0 1.580 1
10/04/14 08/23/69     .    09/07/69 31 54 1 16 0 0 . . . . .
04/02/05 08/29/69 09/14/69 11/13/69 32 64 1 77 0 1 17 4 0 0.690 1
01/01/21 11/27/69 01/16/70 04/01/74 33 48 0 1586 0 1 51 3 0 0.910 0
05/24/29 12/12/69 01/03/70 04/01/74 34 40 0 1571 0 1 23 2 0 0.380 0
08/04/26 01/21/70     .    02/01/70 35 43 1 12 0 0 . . . . .
05/01/21 04/04/70 05/19/70 07/12/70 36 48 1 100 0 1 46 2 0 2.090 1
10/24/08 04/25/70 05/13/70 06/29/70 37 61 1 66 0 1 19 3 1 0.870 1
11/14/28 05/05/70 05/08/70 05/09/70 38 41 1 5 0 1 5 3 0 0.870 0
11/12/19 05/20/70 05/21/70 07/11/70 39 50 1 53 0 1 2 . . . .
11/30/21 05/25/70 07/04/70 04/01/74 40 48 0 1407 1 1 41 4 0 0.750 0
04/30/25 08/19/70 10/15/70 04/01/74 41 45 0 1321 1 1 58 2 0 0.980 0
03/13/34 08/21/70     .    08/23/70 42 36 1 3 0 0 . . . . .
06/01/27 10/22/70     .    10/23/70 43 43 1 2 1 0 . . . . .
05/02/28 11/30/70     .    01/08/71 44 42 1 40 1 0 . . . . .
10/30/34 01/05/71 01/05/71 02/18/71 45 36 1 45 0 1 1 1 0 0.000 0
06/01/22 01/10/71 01/11/71 10/01/73 46 48 1 995 1 1 2 2 0 0.810 1
12/28/23 02/02/71 02/22/71 04/14/71 47 47 1 72 0 1 21 3 0 1.380 1
01/23/15 02/05/71     .    02/13/71 48 56 1 9 0 0 . . . . .
06/21/34 02/15/71 03/22/71 04/01/74 49 36 0 1141 1 1 36 4 0 1.350 0
03/28/25 02/15/71 05/08/71 10/21/73 50 45 1 979 1 1 83 . . . .
06/29/22 03/24/71 04/24/71 01/02/72 51 48 1 285 0 1 32 4 1 1.080 1
01/24/30 04/25/71     .    08/04/71 52 41 1 102 0 0 . . . . .
02/27/24 07/02/71 08/11/71 01/05/72 53 47 1 188 0 1 41 . . . .
09/16/23 07/02/71     .    07/04/71 54 47 1 3 0 0 . . . . .
02/24/19 08/09/71 08/18/71 10/08/71 55 52 1 61 0 1 10 2 0 1.510 1
12/05/32 09/03/71 11/08/71 04/01/74 56 38 0 941 0 1 67 4 0 0.980 0
06/08/30 09/13/71     .    02/08/72 57 41 1 149 0 0 . . . . .
09/17/23 09/23/71 10/13/71 08/30/72 58 47 1 342 1 1 21 2 1 1.820 1
05/12/30 09/29/71 12/15/71 04/01/74 59 41 0 915 1 1 78 2 0 0.190 0
10/29/22 11/18/71 11/20/71 01/24/72 60 49 1 68 0 1 3 3 0 0.660 1
05/12/19 12/04/71     .    12/05/71 61 52 1 2 0 0 . . . . .
08/01/32 12/09/71     .    02/15/72 62 39 1 69 0 0 . . . . .
04/15/39 12/12/71 01/07/72 04/01/74 63 32 0 841 0 1 27 3 1 1.930 0
04/09/23 02/01/72 03/04/72 09/06/73 64 48 1 583 1 1 32 1 0 0.120 0
11/19/20 03/06/72 03/17/72 05/22/72 65 51 1 78 0 1 12 2 0 1.120 1
01/02/19 03/20/72     .    04/20/72 66 53 1 32 0 0 . . . . .
09/03/52 03/23/72 05/18/72 01/01/73 67 19 1 285 0 1 57 3 0 1.020 0
01/10/27 04/07/72 04/09/72 06/13/72 68 45 1 68 0 1 3 3 1 1.680 1
06/05/24 06/01/72 06/10/72 04/01/74 69 47 0 670 0 1 10 2 0 1.200 0
06/17/19 06/17/72 06/21/72 07/16/72 70 52 1 30 0 1 5 3 1 1.680 1
02/22/25 07/21/72 08/20/72 04/01/74 71 47 0 620 0 1 31 3 0 0.970 0
11/22/45 08/14/72 08/17/72 04/01/74 72 26 0 596 0 1 4 3 1 1.460 0
05/13/16 09/11/72 10/07/72 12/09/72 73 56 1 90 0 1 27 3 1 2.160 1
07/20/43 09/18/72 09/22/72 10/04/72 74 29 1 17 0 1 5 1 0 0.610 0
07/25/20 09/29/72     .    09/30/72 75 52 1 2 0 0 . . . . .
09/03/20 10/04/72 11/18/72 04/01/74 76 52 0 545 1 1 46 3 1 1.700 0
08/27/31 10/06/72     .    10/26/72 77 41 1 21 0 0 . . . . .
02/20/24 11/03/72 05/31/73 04/01/74 78 48 0 515 0 1 210 3 0 0.810 0
02/18/19 11/30/72 02/04/73 03/05/73 79 53 1 96 0 1 67 2 0 1.080 1
06/27/26 12/06/72 12/31/72 04/01/74 80 46 0 482 1 1 26 3 0 1.410 0
02/21/20 01/12/73 01/17/73 04/01/74 81 52 0 445 0 1 6 4 1 1.940 0
08/19/42 11/01/71     .    01/01/73 82 29 0 427 0 0 . . . . .
10/04/19 01/24/73 02/24/73 04/13/73 83 53 1 80 0 1 32 4 0 3.050 0
05/13/30 01/30/73 03/07/73 12/29/73 84 42 1 334 0 1 37 4 0 0.600 1
02/13/25 02/06/73     .    02/10/73 85 47 1 5 0 0 . . . . .
03/30/24 03/01/73 03/08/73 04/01/74 86 48 0 397 0 1 8 3 1 1.440 0
12/19/26 03/21/73 05/19/73 07/08/73 87 46 1 110 0 1 60 2 0 2.250 1
11/16/18 03/28/73 04/27/73 04/01/74 88 54 0 370 0 1 31 3 0 0.680 0
03/19/22 04/05/73 08/21/73 10/28/73 89 51 1 207 0 1 139 4 1 1.330 1
03/25/21 04/06/73 09/12/73 10/08/73 90 52 1 186 1 1 160 3 1 0.820 0
09/08/25 04/13/73     .    03/18/74 91 47 1 340 0 0 . . . . .
05/03/28 04/27/73 03/02/74 04/01/74 92 44 0 340 0 1 310 1 0 0.160 0
10/10/25 07/11/73 08/07/73 04/01/74 93 47 0 265 0 1 28 2 0 0.330 0
11/11/29 09/14/73 09/17/73 02/25/74 94 43 1 165 1 1 4 3 0 1.200 1
06/11/33 09/22/73 09/23/73 10/07/73 95 40 1 16 0 1 2 . . . .
02/09/47 10/04/73 10/16/73 04/01/74 96 26 0 180 0 1 13 2 0 0.460 0
04/11/50 11/22/73 12/12/73 04/01/74 97 23 0 131 0 1 21 3 1 1.780 0
04/28/45 12/14/73 03/19/74 04/01/74 98 28 0 109 0 1 96 4 1 0.770 0
02/24/24 12/25/73     .    01/14/74 99 49 1 21 0 0 . . . . .
01/31/39 02/22/74 03/31/74 04/01/74 100 35 0 39 1 1 38 3 0 0.670 0
08/25/24 03/02/74     .    04/01/74 101 49 0 31 0 0 . . . . .
10/30/33 03/22/74     .    04/01/74 102 40 0 11 0 0 . . . . .
05/20/28 09/13/67     .    09/18/67 103 39 1 6 0 0 . . . . .
;
proc lifetest;
time surv1*dead(0);
run;
proc phreg data=stan;
   model surv1*dead(0)=trans surg ageaccpt/rl;
   title "A naive model for all patients and no time-dependent variables";
run;
proc phreg data=stan;
   model surv1*dead(0)=trans surg ageaccpt transsurv/rl;
   transsurv=trans*log(surv1);
   title "A naive model for all patients and no time-dependent variables";
run;
PROC PHREG;
     Model surv1*dead(0) = Transp surg ageaccpt /rl TIES=EFRON;
     IF wait>surv1 OR wait=. Then transp=0; 
     ELSE  transp=1;
Run;



